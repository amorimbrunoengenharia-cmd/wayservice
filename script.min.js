const navbar=document.getElementById("navbar"),navLinks=document.querySelectorAll(".nav-link");window.addEventListener("scroll",()=>{window.scrollY>50?navbar.classList.add("scrolled"):navbar.classList.remove("scrolled")});const menuToggle=document.getElementById("menuToggle"),navMenu=document.getElementById("navMenu");menuToggle.addEventListener("click",()=>{navMenu.classList.toggle("active")}),navLinks.forEach(e=>{e.addEventListener("click",()=>{navMenu.classList.remove("active"),navLinks.forEach(e=>e.classList.remove("active")),e.classList.add("active")})});const sections=document.querySelectorAll("section[id]");function updateActiveLink(){const e=window.pageYOffset;sections.forEach(t=>{const n=t.offsetHeight,o=t.offsetTop-100,r=t.getAttribute("id");e>o&&e<=o+n&&navLinks.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${r}`&&e.classList.add("active")})})}function initFAQAccordion(){const e=document.querySelector(".faq-container");e&&e.addEventListener("click",function(t){const n=t.target.closest(".faq-question");if(!n)return;const o=n.closest(".faq-item");if(!o)return;const r=o.classList.contains("active");e.querySelectorAll(".faq-item").forEach(e=>e.classList.remove("active")),r||o.classList.add("active")})}window.addEventListener("scroll",updateActiveLink);const contactForm=document.getElementById("contactForm");function showNotification(e,t="info"){const n=document.createElement("div");n.className=`notification notification-${t}`,n.textContent=e,n.style.cssText=`\n        position: fixed;\n        top: 100px;\n        right: 20px;\n        padding: 1rem 1.5rem;\n        background: ${"success"===t?"var(--primary-green)":"rgba(255, 255, 255, 0.1)"};\n        color: ${"success"===t?"var(--dark-bg)":"var(--text-white)"};\n        border-radius: 12px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n        backdrop-filter: blur(16px);\n        z-index: 10000;\n        animation: slideIn 0.3s ease;\n        font-weight: 600;\n    `,document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOut 0.3s ease",setTimeout(()=>n.remove(),300)},3e3)}contactForm&&contactForm.addEventListener("submit",e=>{e.preventDefault();const t=contactForm.querySelector('button[type="submit"]'),n=t.innerHTML;t.disabled=!0,t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="spin">\n                <circle cx="12" cy="12" r="10"></circle>\n                <path d="M12 6v6l4 2"></path>\n            </svg>\n            Enviando...\n        ',t.style.opacity="0.7",t.style.cursor="not-allowed";const o=new FormData(contactForm),r=`\n*Nova Solicitação de Orçamento*\n\n*Nome:* ${o.get("nome")}\n*Empresa:* ${o.get("empresa")}\n*Telefone:* ${o.get("telefone")}\n*E-mail:* ${o.get("email")||"Não informado"}\n\n*Mensagem:*\n${o.get("mensagem")}\n        `.trim(),i=`https://wa.me/5518997421905?text=${encodeURIComponent(r)}`;window.open(i,"_blank"),setTimeout(()=>{t.disabled=!1,t.innerHTML=n,t.style.opacity="1",t.style.cursor="pointer"},2e3),contactForm.reset(),showNotification("Redirecionando para WhatsApp...","success")});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions),animatedElements=document.querySelectorAll(".card, .process-card, .feature-card, .section-header");animatedElements.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",observer.observe(e)});const style=document.createElement("style");style.textContent="\n    @keyframes slideIn {\n        from {\n            transform: translateX(100%);\n            opacity: 0;\n        }\n        to {\n            transform: translateX(0);\n            opacity: 1;\n        }\n    }\n    \n    @keyframes slideOut {\n        from {\n            transform: translateX(0);\n            opacity: 1;\n        }\n        to {\n            transform: translateX(100%);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(style),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=t.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"})}})});const telefoneInput=document.querySelector('input[name="telefone"]');telefoneInput&&telefoneInput.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"");t.length<=11&&(t.length<=2?e.target.value=t:t.length<=6?e.target.value=`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?e.target.value=`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:e.target.value=`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`)});const serviceCards=document.querySelectorAll(".service-card");serviceCards.forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-8px)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})});const filterButtons=document.querySelectorAll(".filter-btn"),projectCards=document.querySelectorAll(".project-card"),projectSearch=document.getElementById("projectSearch"),projectsGrid=document.querySelector(".projects-grid");function filterProjects(e,t=""){let n=0;projectCards.forEach(o=>{const r=o.getAttribute("data-category"),i=o.querySelector("h3").textContent.toLowerCase(),c=o.querySelector(".project-description").textContent.toLowerCase(),a="all"===e||r===e,s=""===t||i.includes(t)||c.includes(t);a&&s?(o.style.display="flex",n++):o.style.display="none"}),updateProjectCount(n)}function updateProjectCount(e){let t=document.querySelector(".project-count");!t&&projectsGrid&&(t=document.createElement("div"),t.className="project-count",projectsGrid.parentElement.insertBefore(t,projectsGrid)),t&&(t.textContent=`${e} projeto${1!==e?"s":""} encontrado${1!==e?"s":""}`)}filterButtons.length>0&&filterButtons.forEach(e=>{e.addEventListener("click",()=>{filterButtons.forEach(e=>e.classList.remove("active")),e.classList.add("active");filterProjects(e.getAttribute("data-filter"))})}),projectSearch&&projectSearch.addEventListener("input",e=>{const t=e.target.value.toLowerCase();filterProjects(document.querySelector(".filter-btn.active").getAttribute("data-filter"),t)});const quoteForm=document.getElementById("quoteForm");quoteForm&&quoteForm.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(quoteForm),n=t.get("name"),o=t.get("company"),r=t.get("phone"),i=t.get("email")||"Não informado",c=t.get("message"),a=t.get("workType")||"Não especificado",s=t.get("deadline")||"Não especificado",l=t.get("location")||"Não especificado",d=quoteForm.querySelector('button[type="submit"]'),u=d.innerHTML;d.innerHTML='<svg class="spinner" width="20" height="20" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" opacity="0.25"/><path fill="currentColor" d="M12 2a10 10 0 0 1 10 10h-3a7 7 0 0 0-7-7V2z"/></svg> Enviando...',d.disabled=!0;const m=`\n*Nova Solicitação de Orçamento - Way Service*\n\n*Nome:* ${n}\n*Empresa/Órgão:* ${o}\n*Telefone:* ${r}\n*E-mail:* ${i}\n*Tipo de Obra:* ${a}\n*Prazo Desejado:* ${s}\n*Localização:* ${l}\n\n*Descrição da Necessidade:*\n${c}\n        `.trim(),p=`https://wa.me/5518997421905?text=${encodeURIComponent(m)}`;setTimeout(()=>{window.open(p,"_blank"),d.innerHTML=u,d.disabled=!1,showNotification("Redirecionando para WhatsApp...","success"),quoteForm.reset()},1e3)});const phoneInputs=document.querySelectorAll('input[type="tel"]');function openProjectModal(e){const t=document.getElementById("projectModal");t&&(document.getElementById("modalTitle").textContent=e.title,document.getElementById("modalCategory").textContent=e.category,document.getElementById("modalDescription").textContent=e.description,document.getElementById("modalLocation").textContent=e.location,document.getElementById("modalArea").textContent=e.area,document.getElementById("modalYear").textContent=e.year,t.style.display="flex",document.body.style.overflow="hidden")}function closeProjectModal(){const e=document.getElementById("projectModal");e&&(e.style.display="none",document.body.style.overflow="auto")}phoneInputs.forEach(e=>{e.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"");t.length<=11&&(t.length<=2?e.target.value=t:t.length<=6?e.target.value=`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?e.target.value=`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:e.target.value=`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`)})}),window.addEventListener("click",e=>{const t=document.getElementById("projectModal");e.target===t&&closeProjectModal()});const backToTopBtn=document.getElementById("backToTop");function initScrollProgress(){const e=document.createElement("div");e.className="scroll-progress",document.body.appendChild(e),window.addEventListener("scroll",()=>{const t=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;e.style.width=t+"%"})}function initScrollReveal(){const e=document.querySelectorAll(".reveal, .reveal-left, .reveal-right, .reveal-scale, .reveal-rotate");if(0===e.length)return;const t=()=>{e.forEach(e=>{e.getBoundingClientRect().top<window.innerHeight-150&&e.classList.add("active")})};window.addEventListener("scroll",t),t()}function initTypingEffect(){}function initParticles(){const e=document.querySelectorAll(".hero");0!==e.length&&e.forEach(e=>{const t=document.createElement("div");t.className="particles-container",e.appendChild(t);for(let e=0;e<20;e++){const e=document.createElement("div");e.className="particle",e.style.left=100*Math.random()+"%",e.style.animationDelay=15*Math.random()+"s",e.style.animationDuration=10*Math.random()+10+"s",t.appendChild(e)}})}function initRippleEffect(){const e=document.querySelectorAll(".btn-primary, .btn-secondary, .btn-ripple");0!==e.length&&e.forEach(e=>{e.classList.add("btn-ripple"),e.addEventListener("click",function(e){const t=document.createElement("span");t.className="ripple";const n=this.getBoundingClientRect(),o=Math.max(n.width,n.height),r=e.clientX-n.left-o/2,i=e.clientY-n.top-o/2;t.style.width=t.style.height=o+"px",t.style.left=r+"px",t.style.top=i+"px",this.appendChild(t),setTimeout(()=>t.remove(),600)})})}function showToast(e,t="success"){const n=document.createElement("div");n.className=`toast ${t}`;const o="success"===t?'<svg class="toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>':'<svg class="toast-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>';n.innerHTML=`${o}<div class="toast-message">${e}</div>`,document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),100),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),400)},3e3)}function showSpinner(){let e=document.querySelector(".spinner-overlay");return e||(e=document.createElement("div"),e.className="spinner-overlay",e.innerHTML='<div class="spinner"></div>',document.body.appendChild(e)),setTimeout(()=>e.classList.add("active"),10),e}function hideSpinner(){const e=document.querySelector(".spinner-overlay");e&&e.classList.remove("active")}function initLightbox(){const e=document.getElementById("lightbox");if(!e)return;const t=document.querySelectorAll(".project-card"),n=document.getElementById("lightboxImage"),o=document.getElementById("lightboxTitle"),r=document.getElementById("lightboxDescription"),i=document.getElementById("lightboxDetails"),c=e.querySelector(".lightbox-close"),a=e.querySelector(".lightbox-prev"),s=e.querySelector(".lightbox-next");let l=0,d=[];function u(){const t=d[l];n.style.background=t.gradient,n.style.width="100%",n.style.height="500px",n.style.borderRadius="12px",o.textContent=t.title,r.textContent=t.description,i.innerHTML=t.details.map(e=>`<div class="detail-item">${e}</div>`).join(""),e.classList.add("active"),document.body.style.overflow="hidden"}function m(){e.classList.remove("active"),document.body.style.overflow=""}function p(){l=(l+1)%d.length,u()}function v(){l=(l-1+d.length)%d.length,u()}t.forEach((e,t)=>{const n=e.querySelector(".project-image"),o=e.querySelector(".project-header h3").textContent,r=e.querySelector(".project-description").textContent,i=e.querySelectorAll(".detail-item"),c=window.getComputedStyle(n).background;d.push({gradient:c,title:o,description:r,details:Array.from(i).map(e=>e.innerHTML)}),n.style.cursor="pointer",n.addEventListener("click",()=>{l=t,u()})}),c.addEventListener("click",m),s.addEventListener("click",p),a.addEventListener("click",v),e.addEventListener("click",t=>{t.target===e&&m()}),document.addEventListener("keydown",t=>{e.classList.contains("active")&&("Escape"===t.key&&m(),"ArrowRight"===t.key&&p(),"ArrowLeft"===t.key&&v())})}function initWizardForm(){const e=document.querySelector(".wizard-container");if(!e)return;const t=e.querySelectorAll(".wizard-step"),n=e.querySelectorAll(".wizard-panel"),o=e.querySelectorAll(".wizard-next"),r=e.querySelectorAll(".wizard-prev");let i=0;function c(e){t.forEach((t,n)=>{t.classList.remove("active"),n<e?t.classList.add("completed"):t.classList.remove("completed"),n===e&&t.classList.add("active")}),n.forEach((t,n)=>{t.classList.remove("active"),n===e&&t.classList.add("active")}),i=e,function(){const e=(i+1)/t.length*100,n=document.querySelector(".form-progress-bar");n&&(n.style.width=e+"%")}()}o.forEach(e=>{e.addEventListener("click",()=>{(function(e){const t=n[e].querySelectorAll("input[required], select[required], textarea[required]");let o=!0;return t.forEach(e=>{e.value.trim()?(e.parentElement.classList.remove("invalid"),e.parentElement.classList.add("valid")):(e.parentElement.classList.add("invalid"),o=!1)}),o})(i)&&i<t.length-1&&c(i+1)})}),r.forEach(e=>{e.addEventListener("click",()=>{i>0&&c(i-1)})}),c(0)}function initRealTimeValidation(){const e=document.querySelectorAll("input[required], select[required], textarea[required]");function t(e){const t=e.parentElement;if("email"===e.type){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)&&e.value)return t.classList.add("invalid"),t.classList.remove("valid"),!1}return""===e.value.trim()&&e.hasAttribute("required")?(t.classList.add("invalid"),t.classList.remove("valid"),!1):""!==e.value.trim()?(t.classList.remove("invalid"),t.classList.add("valid"),!0):(t.classList.remove("invalid","valid"),!0)}0!==e.length&&e.forEach(e=>{if(!e.parentElement.querySelector(".validation-icon")){const t=document.createElement("span");t.className="validation-icon check",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>',t.style.color="var(--primary-green)";const n=document.createElement("span");n.className="validation-icon error",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>',n.style.color="#ff4757",e.parentElement.appendChild(t),e.parentElement.appendChild(n)}e.addEventListener("blur",()=>t(e)),e.addEventListener("input",()=>{e.parentElement.classList.contains("invalid")&&t(e)})})}function initFileUpload(){const e=document.querySelectorAll(".file-upload-area");function t(e,t){Array.from(e).forEach(e=>{if(e.type.startsWith("image/")){const n=new FileReader;n.onload=n=>{const o=document.createElement("div");o.className="file-preview-item",o.innerHTML=`\n                        <img class="file-preview-image" src="${n.target.result}" alt="${e.name}">\n                        <button class="file-preview-remove">&times;</button>\n                    `,o.querySelector(".file-preview-remove").addEventListener("click",()=>{o.remove()}),t.appendChild(o)},n.readAsDataURL(e)}})}0!==e.length&&e.forEach(e=>{const n=e.querySelector('input[type="file"]')||function(e){const t=document.createElement("input");return t.type="file",t.multiple=!0,t.accept="image/*,.pdf",t.style.display="none",e.appendChild(t),t}(e),o=e.nextElementSibling?.classList.contains("file-preview")?e.nextElementSibling:function(e){const t=document.createElement("div");return t.className="file-preview",e.after(t),t}(e);e.addEventListener("click",()=>n.click()),e.addEventListener("dragover",t=>{t.preventDefault(),e.classList.add("drag-over")}),e.addEventListener("dragleave",()=>{e.classList.remove("drag-over")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("drag-over");t(n.dataTransfer.files,o)}),n.addEventListener("change",e=>{t(e.target.files,o)})})}function initUrgencyTimer(){const e=document.querySelectorAll(".urgency-timer");0!==e.length&&e.forEach(e=>{const t=(new Date).getTime()+1728e5;function n(){const n=(new Date).getTime(),r=t-n,i=Math.floor(r%864e5/36e5),c=Math.floor(r%36e5/6e4),a=Math.floor(r%6e4/1e3),s=e.querySelector(".timer-hours"),l=e.querySelector(".timer-minutes"),d=e.querySelector(".timer-seconds");s&&(s.textContent=i.toString().padStart(2,"0")),l&&(l.textContent=c.toString().padStart(2,"0")),d&&(d.textContent=a.toString().padStart(2,"0")),r<0&&(clearInterval(o),e.textContent="Prazo expirado")}n();const o=setInterval(n,1e3)})}function initCounterAnimation(){const e=document.querySelectorAll(".counter");if(0===e.length)return;e.forEach(e=>(e=>{const t=parseInt(e.getAttribute("data-target")),n=t/125;let o=0;const r=()=>{o+=n,o<t?(e.textContent=Math.floor(o),requestAnimationFrame(r)):e.textContent=t};r()})(e))}function initProjectFilters(){const e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".project-card"),n=document.getElementById("projectSearch"),o=document.getElementById("projectSort");if(0===e.length)return;let r="all",i="";function c(){t.forEach(e=>{const t=e.getAttribute("data-category"),n=e.querySelector(".project-header h3").textContent.toLowerCase(),o=e.querySelector(".project-description").textContent.toLowerCase(),c="all"===r||t===r,a=""===i||n.includes(i)||o.includes(i);c&&a?(e.style.display="",setTimeout(()=>e.classList.add("reveal"),50)):(e.style.display="none",e.classList.remove("reveal"))});const e=Array.from(t).filter(e=>"none"!==e.style.display);console.log(`${e.length} projetos visíveis`)}e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),r=t.getAttribute("data-filter"),c()})}),n&&n.addEventListener("input",e=>{i=e.target.value.toLowerCase(),c()}),o&&o.addEventListener("change",e=>{!function(e){const n=document.querySelector(".projects-grid");if(!n)return;const o=Array.from(t);switch(e){case"recent":o.sort((e,t)=>{const n=parseInt(e.querySelector(".detail-item:last-child")?.textContent)||0;return(parseInt(t.querySelector(".detail-item:last-child")?.textContent)||0)-n});break;case"area":o.sort((e,t)=>{const n=parseInt(e.querySelector(".detail-item:nth-child(2)")?.textContent.replace(/\D/g,""))||0;return(parseInt(t.querySelector(".detail-item:nth-child(2)")?.textContent.replace(/\D/g,""))||0)-n});break;case"name":o.sort((e,t)=>{const n=e.querySelector(".project-header h3").textContent,o=t.querySelector(".project-header h3").textContent;return n.localeCompare(o)})}o.forEach(e=>n.appendChild(e))}(e.target.value)})}function initCounterAnimation(){const e=document.querySelectorAll(".counter");if(0===e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&((e=>{const t=parseInt(e.getAttribute("data-target")),n=t/125;let o=0;const r=()=>{o+=n,o<t?(e.textContent=Math.floor(o),requestAnimationFrame(r)):e.textContent=t};r()})(e.target),t.unobserve(e.target))})},{threshold:.5});e.forEach(e=>t.observe(e))}function initFAQSearch(){const e=document.querySelector(".faq-search input");if(!e)return;const t=document.querySelectorAll(".faq-item");e.addEventListener("input",e=>{const n=e.target.value.toLowerCase();t.forEach(e=>{const t=e.querySelector(".faq-question").textContent.toLowerCase(),o=e.querySelector(".faq-answer").textContent.toLowerCase();t.includes(n)||o.includes(n)?e.classList.remove("hidden"):e.classList.add("hidden")})})}function initTimeline(){const e=document.querySelectorAll(".timeline-item");if(0===e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("active")})},{threshold:.3});e.forEach(e=>t.observe(e))}function initTestimonialSlider(){const e=document.querySelector(".testimonial-slider");if(!e)return;const t=e.querySelector(".testimonial-track"),n=e.querySelectorAll(".testimonial-item"),o=e.querySelector(".testimonial-dots");let r=0;function i(e){r=e,t.style.transform=`translateX(-${100*e}%)`,o.querySelectorAll(".testimonial-dot").forEach((e,t)=>{e.classList.toggle("active",t===r)})}n.forEach((e,t)=>{const n=document.createElement("div");n.className="testimonial-dot",0===t&&n.classList.add("active"),n.addEventListener("click",()=>i(t)),o.appendChild(n)}),setInterval(()=>{r=(r+1)%n.length,i(r)},5e3)}backToTopBtn&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?backToTopBtn.classList.add("visible"):backToTopBtn.classList.remove("visible")}),backToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.addEventListener("DOMContentLoaded",()=>{initScrollProgress(),initScrollReveal(),initTypingEffect(),initParticles(),initRippleEffect(),initLightbox(),initWizardForm(),initRealTimeValidation(),initFileUpload(),initUrgencyTimer(),initCounterAnimation(),initProjectFilters(),initFAQAccordion(),initFAQSearch(),initTimeline(),initTestimonialSlider()}),console.log("Way Service Website - Carregado com sucesso! ✓"),console.log("Melhorias visuais 2025 - Ativadas! ✨");